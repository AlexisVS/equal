{"version":3,"sources":["./src/app/in/planning/components/form-reservation/form-reservation.component.ts","./src/app/in/planning/components/form-reservation/form-reservation.component.html","./src/app/in/planning/components/planning.calendar/components/planning.calendar.bookings/planning.calendar.bookings.component.ts","./src/app/in/planning/components/planning.calendar/components/planning.calendar.bookings/planning.calendar.bookings.component.html","./src/app/in/planning/components/planning.calendar/components/planning.calendar.navbar/components/planning.calendar.searchin/planning.calendar.searchin.component.ts","./src/app/in/planning/components/planning.calendar/components/planning.calendar.navbar/components/planning.calendar.searchin/planning.calendar.searchin.component.html","./src/app/in/planning/components/planning.calendar/components/planning.calendar.navbar/components/planning.calendar.searchout/planning.calendar.searchout.component.ts","./src/app/in/planning/components/planning.calendar/components/planning.calendar.navbar/components/planning.calendar.searchout/planning.calendar.searchout.component.html","./src/app/in/planning/components/planning.calendar/components/planning.calendar.navbar/planning.calendar.navbar.component.ts","./src/app/in/planning/components/planning.calendar/components/planning.calendar.navbar/planning.calendar.navbar.component.html","./src/app/in/planning/components/planning.calendar/planning.calendar.component.ts","./src/app/in/planning/components/planning.calendar/planning.calendar.component.html","./src/app/in/planning/planning-routing.module.ts","./src/app/in/planning/planning.component.ts","./src/app/in/planning/planning.component.html","./src/app/in/planning/planning.module.ts","./src/app/model/changedatearg.ts","./src/app/model/changereservationarg.ts","./src/app/model/headerdays.ts","./src/app/model/searchreservationargs.ts","./src/app/model/selectreservationarg.ts"],"names":[],"mappings":"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","file":"src_app_in_planning_planning_module_ts.js","sourcesContent":["import { Component, Inject, OnInit, OnDestroy } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { ConsumptionClass } from 'src/app/model/consumption.class';\r\nimport { ReservationService } from 'src/app/services/reservation-service';\r\n\r\n@Component({\r\n  selector: 'app-dialogreservation',\r\n  templateUrl: './form-reservation.component.html',\r\n  styleUrls: ['./form-reservation.component.css']\r\n})\r\nexport class FormReservationComponent implements OnInit, OnDestroy  {\r\n  title: string;\r\n  $rooms: any;\r\n  sub: Subscription;\r\n  rental_unit_id: number;\r\n  date_from: Date;\r\n  date_to: Date;\r\n  booking: ConsumptionClass;\r\n  rooms: any;\r\n\r\n  // tslint:disable-next-line:max-line-length\r\n  constructor(\r\n    private service: ReservationService, \r\n    private dialog: MatDialogRef<FormReservationComponent>, \r\n    @Inject(MAT_DIALOG_DATA) private data: any\r\n  ) {\r\n    console.log(data);\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  onConfirm(form: NgForm) {\r\n  \r\n  }\r\n\r\n  onDelete() {\r\n    \r\n  }\r\n\r\n  onClose() {\r\n    this.dialog.close('no');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n\r\n  }\r\n\r\n}\r\n","<h2 mat-dialog-title>{{ title }} reservation</h2>\r\n\r\n<form class=\"form-container100 popup\" (ngSubmit)=\"onConfirm(f)\" #f=\"ngForm\">\r\n  <mat-dialog-content>\r\n    <div *ngIf=\"booking.id !== 0\">\r\n      N. reservation {{ booking.id }}\r\n      <br><br>\r\n    </div>\r\n\r\n    <mat-form-field>\r\n      <mat-select name=\"rental_unit_id\" placeholder=\"-- room --\" [ngModel]=\"rental_unit_id\">\r\n        <mat-option *ngFor=\"let room of rooms\" [value]=\"room.rental_unit_id\">\r\n          {{ room.roomNumber }} {{ room.typeName }}\r\n        </mat-option>\r\n      </mat-select>\r\n    </mat-form-field>  \r\n\r\n    <mat-form-field>\r\n      <mat-datepicker #picker1></mat-datepicker>\r\n      <input matInput [matDatepicker]=\"picker1\" name=\"date_from\" placeholder=\"Start\" [ngModel]=\"date_from\" readonly>\r\n      <mat-datepicker-toggle matSuffix [for]=\"picker1\"></mat-datepicker-toggle>\r\n    </mat-form-field>\r\n\r\n    <mat-form-field>\r\n      <mat-datepicker #picker2></mat-datepicker>\r\n      <input matInput [matDatepicker]=\"picker2\" name=\"date_to\" placeholder=\"End\" [ngModel]=\"date_to\" readonly>\r\n      <mat-datepicker-toggle matSuffix [for]=\"picker2\"></mat-datepicker-toggle>\r\n    </mat-form-field>\r\n\r\n    <mat-form-field>\r\n      <input matInput name=\"name\" placeholder=\"name\" [ngModel]=\"booking.booking_ref\" required>\r\n    </mat-form-field>\r\n\r\n  </mat-dialog-content>\r\n\r\n  <mat-dialog-actions>\r\n    <div class=\"btnDelete\" *ngIf=\"booking.id !== 0\">\r\n      <button mat-raised-button color=\"primary\" type=\"button\" (click)=\"onDelete()\">Delete</button>\r\n    </div>\r\n    <button mat-raised-button color=\"primary\" [disabled]=\"f.invalid\">Save</button>    \r\n    <button mat-raised-button type=\"button\" (click)=\"onClose()\">Cancel</button>\r\n  </mat-dialog-actions>\r\n</form>","import { Component, Input, Output, ElementRef, EventEmitter, OnInit, OnChanges, SimpleChanges } from '@angular/core';\r\n\r\nimport { RentalUnitClass } from 'src/app/model/rental.unit.class';\r\nimport { ConsumptionClass } from 'src/app/model/consumption.class';\r\n\r\nimport { StatusbarArg } from 'src/app/model/changestatusbarargs';\r\n\r\n@Component({\r\n  selector: 'planning-calendar-bookings',\r\n  templateUrl: './planning.calendar.bookings.component.html',\r\n  styleUrls: ['./planning.calendar.bookings.component.css']\r\n})\r\nexport class PlanningCalendarBookingsComponent implements OnInit, OnChanges  {\r\n  @Input()  color: string;\r\n  @Input()  room: RentalUnitClass;\r\n  @Input()  day: Date;\r\n  @Input()  consumption: ConsumptionClass | null;\r\n  @Output() changestatusbar = new EventEmitter<StatusbarArg>();\r\n  @Output() reservation = new EventEmitter<ConsumptionClass | null>();\r\n\r\n  public is_weekend = false;\r\n  public is_today = false;\r\n  public is_first = false;\r\n\r\n  constructor(private elementRef: ElementRef) {}\r\n\r\n  ngOnInit() { }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.consumption) {\r\n      this.datasourceChanged();\r\n    }\r\n  }\r\n\r\n  onDayReservation() {\r\n    this.reservation.emit(this.consumption);\r\n  }\r\n\r\n  private datasourceChanged() {\r\n    this.is_first = false;\r\n\r\n    this.is_today = ((date:Date) => {\r\n      const today = new Date();\r\n      return date.getDate() == today.getDate() && date.getMonth() == today.getMonth() && date.getFullYear() == today.getFullYear()\r\n    })(this.day);\r\n\r\n    this.is_weekend = ((date:Date) => (date.getDay() == 0 || date.getDay() == 6) )(this.day);\r\n\r\n    if(this.consumption) {\r\n      this.is_first = (this.consumption.date_from.getDate() == this.day.getDate() && this.consumption.date_from.getMonth() == this.day.getMonth());\r\n      this.elementRef.nativeElement.style.setProperty('--duration', this.consumption.nb_nights + 1);\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"reservedBox\" [class.is-weekend]=\"is_weekend\">\r\n\r\n  <div class=\"reservedBoxBg\" [class.invert]=\"consumption\">\r\n    {{ day | date: 'd' }}\r\n  </div>\r\n\r\n  <div *ngIf=\"consumption\" style=\"height: 100%; position: relative;\" (click)=\"onDayReservation()\" > \r\n\r\n    <div class=\"reserved-box\"  [style.background-color]=\"color\"></div>  \r\n\r\n    <div *ngIf=\"is_first\" class=\"booking-details\">  \r\n      <div style=\"display: flex;\">\r\n        <div style=\"flex: 0 1 20%;\">{{consumption.booking_ref}}</div><div style=\"margin-left: auto\">{{consumption.booking_status}}</div>\r\n      </div>\r\n      <div style=\"display: flex;\">\r\n        <div style=\"flex: 0 1 20%;\">{{consumption.booking_customer}}</div><div style=\"margin-left: auto\">{{consumption.booking_payment_status}}</div>\r\n      </div>\r\n    </div>    \r\n\r\n  </div>\r\n  <div *ngIf=\"is_today\" class=\"is-today\"></div>\r\n</div>","import { Component, Output, EventEmitter, ViewChild, ElementRef, OnInit, AfterViewInit} from '@angular/core';\r\nimport { tap, debounceTime, distinctUntilChanged } from 'rxjs/operators';\r\nimport { fromEvent, Observable, of } from 'rxjs';\r\n\r\nimport { PersonClass } from 'src/app/model/person.class';\r\nimport { SelectReservationArg } from 'src/app/model/selectreservationarg';\r\nimport { SearchReservationArg } from 'src/app/model/searchreservationargs';\r\nimport { ReservationService } from 'src/app/services/reservation-service';\r\n\r\n@Component({\r\n  selector: 'planning-calendar-searchin',\r\n  templateUrl: './planning.calendar.searchin.component.html',\r\n  styleUrls: ['./planning.calendar.searchin.component.css']\r\n})\r\nexport class PlanningCalendarSearchInComponent implements OnInit, AfterViewInit {\r\n  @Output() selectreservation = new EventEmitter<SelectReservationArg>();\r\n  @ViewChild('fastsearch') fastsearch: ElementRef;\r\n  persons$: Observable<any> = of([]);\r\n  years = '0';\r\n  months = '0';\r\n  name = '';\r\n\r\n  constructor(private service: ReservationService) {}\r\n\r\n  ngOnInit() { }\r\n\r\n  ngAfterViewInit() {\r\n    fromEvent(this.fastsearch.nativeElement, 'keyup').pipe(\r\n      debounceTime(150),\r\n      distinctUntilChanged(),\r\n      tap(() => {\r\n        this.name = this.fastsearch.nativeElement.value;\r\n        const search = new SearchReservationArg(+this.years, +this.months, this.name);\r\n        this.persons$ = this.service.getReservationByName(search);\r\n      })\r\n    ).subscribe();\r\n  }\r\n\r\n  onYearsChange(data: any) {\r\n    this.years = data.value;\r\n    const search = new SearchReservationArg(+this.years, +this.months, this.name);\r\n    this.persons$ = this.service.getReservationByName(search);\r\n  }\r\n\r\n  onMonthsChange(data: any) {\r\n    this.months = data.value;\r\n    const search = new SearchReservationArg(+this.years, +this.months, this.name);\r\n    this.persons$ = this.service.getReservationByName(search);\r\n  }\r\n\r\n  onSelect(person: PersonClass) {\r\n    const rental_unit_id = person.rental_unit_id;\r\n    const date_from = person.date_from;\r\n    const date_to = person.date_to;\r\n    const args = new SelectReservationArg(rental_unit_id, date_from, date_to);\r\n    this.selectreservation.emit(args);\r\n  }\r\n\r\n}\r\n","<div class=\"innerPanel\">  \r\n  <div>\r\n    <mat-form-field>\r\n      <mat-select name=\"years\" [ngModel]=\"years\" (selectionChange)=\"onYearsChange($event)\">\r\n        <mat-option value=\"0\">-- All years --</mat-option>\r\n        <mat-option value=\"2018\">2018</mat-option>\r\n        <mat-option value=\"2019\">2019</mat-option>\r\n        <mat-option value=\"2020\">2020</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n    &nbsp;\r\n    <mat-form-field>\r\n      <mat-select name=\"months\" [ngModel]=\"months\" (selectionChange)=\"onMonthsChange($event)\">\r\n        <mat-option value=\"0\">-- All months --</mat-option>\r\n        <mat-option value=\"1\">January</mat-option>\r\n        <mat-option value=\"2\">February</mat-option>\r\n        <mat-option value=\"3\">March</mat-option>\r\n        <mat-option value=\"4\">April</mat-option>\r\n        <mat-option value=\"5\">May</mat-option>\r\n        <mat-option value=\"6\">June</mat-option>\r\n        <mat-option value=\"7\">July</mat-option>\r\n        <mat-option value=\"8\">August</mat-option>\r\n        <mat-option value=\"9\">September</mat-option>\r\n        <mat-option value=\"10\">October</mat-option>\r\n        <mat-option value=\"11\">November</mat-option>\r\n        <mat-option value=\"12\">December</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n    &nbsp;\r\n    <mat-form-field>\r\n      <input matInput placeholder=\"name\" #fastsearch>\r\n    </mat-form-field>\r\n  </div> \r\n  <div>\r\n    <table>\r\n      <tr class=\"head\">\r\n        <td>Id</td>\r\n        <td>Room</td>\r\n        <td>Start</td>\r\n        <td>End</td>\r\n        <td>Name</td>\r\n      </tr>\r\n      <tr class=\"rows\" *ngFor=\"let person of persons$ | async\" (click)=\"onSelect(person)\">\r\n        <td class=\"tdId\">{{ person.id }}</td>\r\n        <td class=\"tdRoom\">{{ person.name }} </td>\r\n        <td class=\"tdDate\">{{ person.date_from | date: 'dd/MM/yyyy' }}</td>\r\n        <td class=\"tdDate\">{{ person.date_to | date: 'dd/MM/yyyy' }}</td>\r\n        <td class=\"tdName\">{{ person.name }}</td>\r\n      </tr>\r\n    </table>\r\n  </div>  \r\n</div>\r\n","import { Component, Output, EventEmitter, OnInit } from '@angular/core';\r\nimport { SelectReservationArg } from 'src/app/model/selectreservationarg';\r\n\r\n@Component({\r\n  selector: 'planning-calendar-searchout',\r\n  templateUrl: './planning.calendar.searchout.component.html',\r\n  styleUrls: ['./planning.calendar.searchout.component.css']\r\n})\r\nexport class PlanningCalendarSearchOutComponent implements OnInit {\r\n  @Output() selectreservation = new EventEmitter<SelectReservationArg>();\r\n  isopen = false;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() { }\r\n\r\n  onReservationSelected(args: SelectReservationArg) {\r\n    this.isopen = false;\r\n    this.selectreservation.emit(args);\r\n  }\r\n\r\n  onOpenClose() {\r\n    this.isopen = !this.isopen;\r\n  }\r\n\r\n}\r\n","<div class=\"outerPanel\">\r\n  <div class=\"outerButton\">\r\n    <button mat-icon-button cdkOverlayOrigin #trigger=\"cdkOverlayOrigin\" (click)=\"onOpenClose()\">\r\n      <mat-icon>calendar_today</mat-icon>\r\n    </button>\r\n  </div>\r\n  <ng-template cdkConnectedOverlay [cdkConnectedOverlayOrigin]=\"trigger\" [cdkConnectedOverlayOpen]=\"isopen\">\r\n    <planning-calendar-searchin (selectreservation)=\"onReservationSelected($event)\"></planning-calendar-searchin>\r\n  </ng-template>\r\n</div>\r\n","import { Component, Input, Output, EventEmitter, OnInit } from '@angular/core';\r\n\r\nimport { HeaderDays } from 'src/app/model/headerdays';\r\nimport { SelectReservationArg } from 'src/app/model/selectreservationarg';\r\nimport { ChangeDateArg } from 'src/app/model/changedatearg';\r\n\r\n@Component({\r\n  selector: 'planning-calendar-navbar',\r\n  templateUrl: './planning.calendar.navbar.component.html',\r\n  styleUrls: ['./planning.calendar.navbar.component.css']\r\n})\r\nexport class PlanningCalendarNavbarComponent implements OnInit {\r\n  @Input() day: number;\r\n  @Input() month: number;\r\n  @Input() year: number;\r\n  @Output() changedays = new EventEmitter<ChangeDateArg>();\r\n\r\n  currymd: Date;\r\n  datpicker: Date;\r\n  cbrooms: any[];\r\n  type: string;\r\n  capacity = '0';\r\n  hd: HeaderDays;\r\n  view_range: number = 15;\r\n\r\n\r\n  constructor() { \r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.type = 'month';\r\n    const capacity = +this.capacity;\r\n    this.currymd = new Date(this.year, this.month - 1, 1);\r\n    this.datpicker = new Date(this.currymd);\r\n    this.hd = this.createHeaderDays();\r\n    const args = new ChangeDateArg(this.type, 'init', capacity, this.hd);\r\n    this.changedays.emit(args);\r\n  }\r\n\r\n  onRoomChange(data: any) {\r\n    this.capacity = data.value;\r\n    this.changeDays(this.type, 'refresh');\r\n  }\r\n\r\n  onViewChange() {\r\n    this.changeDays(this.type, 'refresh');\r\n  }\r\n  \r\n  onToday() {\r\n    this.type = 'month';\r\n    let date = new Date();\r\n    date.setDate(1);\r\n    this.currymd = new Date(date);\r\n    this.changeDays(this.type, 'refresh');\r\n  }\r\n\r\n  onReservationSelected(args: SelectReservationArg) {\r\n    this.type = 'month';\r\n    const d = new Date(args.date_from);\r\n    d.setDate(1);\r\n    this.currymd = new Date(d);\r\n    this.changeDays(this.type, 'refresh');\r\n  }\r\n\r\n  onPrev() {\r\n    this.currymd = ( (d: Date): Date => {\r\n      let x = new Date(d);\r\n      x.setDate(1);\r\n      x.setMonth(x.getMonth()-1);\r\n      return x;\r\n    })(this.currymd);\r\n\r\n    this.changeDays(this.type, 'prev');\r\n  }\r\n\r\n  onNext() {\r\n    this.currymd = ( (d: Date): Date => {\r\n      let x = new Date(d);\r\n      x.setDate(1);\r\n      x.setMonth(x.getMonth()+1);\r\n      return x;\r\n    })(this.currymd);\r\n\r\n    this.changeDays(this.type, 'next');\r\n  }\r\n\r\n  /*\r\n  onPrev15Day() {\r\n    this.type = '15day';\r\n    const d = new Date(this.manager.getPrevMonth(this.currymd));\r\n    d.setDate(15);\r\n    this.currymd = new Date(d);\r\n    this.changeDays(this.type, 'prev');\r\n  }\r\n\r\n  onNext15Day() {\r\n    this.type = '15day';\r\n    const d = new Date(this.manager.getNextMonth(this.currymd));\r\n    d.setDate(15);\r\n    this.currymd = new Date(d);\r\n    this.changeDays(this.type, 'next');\r\n  }\r\n\r\n  onPrevMonth() {\r\n    if (this.type === '15day') {\r\n      const d = this.manager.getDaysInTheMonth(this.currymd);\r\n      this.currymd = new Date(this.currymd.getFullYear(), this.currymd.getMonth(), 1);\r\n    } else {\r\n      this.currymd = new Date(this.manager.getPrevMonth(this.currymd));\r\n    }\r\n    this.type = 'month';\r\n    this.changeDays(this.type, 'prev');\r\n  }\r\n\r\n  onNextMonth() {\r\n    if (this.type === '15day') {\r\n      const d = this.manager.getDaysInTheMonth(this.currymd);\r\n      this.currymd = new Date(this.currymd.getFullYear(), this.currymd.getMonth(), d);\r\n    } else {\r\n      this.currymd = new Date(this.manager.getNextMonth(this.currymd));\r\n    }\r\n    this.type = 'month';\r\n    this.changeDays(this.type, 'next');\r\n  }\r\n*/\r\n\r\n  private changeDays(type: string, operation: string) {\r\n    const capacity = +this.capacity;\r\n    this.datpicker = new Date(this.currymd);\r\n    this.hd = this.createHeaderDays();\r\n    const args = new ChangeDateArg(type, operation, capacity, this.hd);\r\n    this.changedays.emit(args);\r\n  }\r\n\r\n  private createHeaderDays(): HeaderDays {\r\n    const h = new HeaderDays();\r\n    let currdate = new Date(this.currymd);\r\n    const dd = currdate.getDate();\r\n\r\n    let $days_in_month = ( (d: Date):number => {\r\n      let x = new Date(d.getFullYear(), d.getMonth() + 1, 0);\r\n      return x.getDate();\r\n    })(currdate);\r\n\r\n    // change the max days displayed here        \r\n    let days = (dd === 1) ? $days_in_month : 31;\r\n    // days = Math.min(this.view_range, days);\r\n\r\n    for (let i = 0; i < days; i++) {\r\n      if (i > 0) {\r\n        currdate = ( (d: Date):Date => {\r\n          let x = new Date(d);\r\n          x.setDate(x.getDate() + 1);\r\n          return x;\r\n        })(currdate);\r\n      }\r\n      h.headDaysAll.push(currdate);\r\n    }\r\n    h.date_from = h.headDaysAll[0];\r\n    h.date_to = h.headDaysAll[h.headDaysAll.length - 1];\r\n    const firstmonth = h.headDaysAll[0].getMonth();\r\n    for (const dayhead of h.headDaysAll) {\r\n      if (dayhead.getMonth() === firstmonth) {\r\n        h.headDays1.push(dayhead);\r\n      } else {\r\n        h.headDays2.push(dayhead);\r\n      }\r\n    }\r\n    if (h.headDays1.length > 0) {\r\n      h.months.push({\r\n        date: h.headDays1[0],\r\n        days: h.headDays1.length\r\n      });\r\n    }\r\n    if (h.headDays2.length > 0) {\r\n      h.months.push({\r\n          date: h.headDays2[0],\r\n          days: h.headDays2.length\r\n        }\r\n      );\r\n    }\r\n    return h;\r\n  }\r\n\r\n}\r\n","<div>\r\n  <div class=\"containerNavigationBar\">\r\n    <div class=\"panelFilters\">\r\n\r\n      <div>\r\n        <planning-calendar-searchout (selectreservation)=\"onReservationSelected($event)\"></planning-calendar-searchout>\r\n      </div>\r\n      <div>\r\n        <mat-form-field>\r\n          <mat-select name=\"capacity\" [ngModel]=\"capacity\" (selectionChange)=\"onRoomChange($event)\">\r\n            <mat-option value=\"0\">-- All room --</mat-option>\r\n            <mat-option value=\"1\">Single</mat-option>\r\n            <mat-option value=\"2\">Double</mat-option>\r\n            <mat-option value=\"3\">Triple</mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n      </div>\r\n      <!--\r\n      <div>\r\n        <mat-form-field>\r\n          <mat-select name=\"view_range\" [(ngModel)]=\"view_range\" (selectionChange)=\"onViewChange($event)\">\r\n            <mat-option value=\"7\">7 days</mat-option>\r\n            <mat-option value=\"15\">15 days</mat-option>\r\n            <mat-option value=\"31\">1 month</mat-option>\r\n          </mat-select>\r\n        </mat-form-field>          \r\n      </div>\r\n      -->\r\n\r\n\r\n    </div>\r\n\r\n    <div class=\"panelStatus\">\r\n      {{hd.date_from | date : 'd MMM y' }} - {{hd.date_to | date : 'd MMM y'}}\r\n    </div>\r\n\r\n    <div class=\"panelNavigation\">\r\n      <button mat-icon-button (click)=\"onPrev()\">\r\n        <mat-icon>chevron_left</mat-icon>\r\n      </button>\r\n      <button mat-button (click)=\"onToday()\">{{ 'BOOKING_PLANNING_HEADER_TODAY' |  translate}}</button>\r\n      <button mat-icon-button (click)=\"onNext()\">\r\n        <mat-icon>chevron_right</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Input, Output, EventEmitter, ViewChild, OnInit } from '@angular/core';\r\n\r\nimport { PlanningCalendarNavbarComponent } from './components/planning.calendar.navbar/planning.calendar.navbar.component';\r\nimport { ChangeReservationArg } from 'src/app/model/changereservationarg';\r\nimport { ChangeDateArg } from 'src/app/model/changedatearg';\r\nimport { RentalUnitClass } from 'src/app/model/rental.unit.class';\r\nimport { ConsumptionClass } from 'src/app/model/consumption.class';\r\nimport { HeaderDays } from 'src/app/model/headerdays';\r\n\r\n@Component({\r\n  selector: 'planning-calendar',\r\n  templateUrl: './planning.calendar.component.html',\r\n  styleUrls: ['./planning.calendar.component.scss']\r\n})\r\nexport class PlanningCalendarComponent implements OnInit {\r\n  @Input() year: number;\r\n  @Input() month: number;\r\n  @Input() day: number;\r\n  @Input() rental_units: RentalUnitClass[] = new Array<RentalUnitClass>();\r\n  @Input() consumptions: ConsumptionClass[] = new Array<ConsumptionClass>();\r\n\r\n  @Output() changereservation = new EventEmitter<ChangeReservationArg>();\r\n  @Output() reservation = new EventEmitter<ConsumptionClass | null>();\r\n  @ViewChild(PlanningCalendarNavbarComponent) navbar: PlanningCalendarNavbarComponent;\r\n\r\n  headerdays: HeaderDays;\r\n\r\n\r\n  public colors: any[] = [\r\n    '#ff9633', '#0fc4a7','#0288d1','#9575cd','#C80651'\r\n  ];\r\n  \r\n\r\n  constructor() {    \r\n  }\r\n\r\n  get currentYMD(): Date {\r\n    return this.navbar.currymd;\r\n  }\r\n\r\n  ngOnInit() { }\r\n\r\n  onDaysChanged(data: ChangeDateArg) {\r\n    this.headerdays = data.days;\r\n    const date_from = data.days.date_from;\r\n    const date_to = data.days.date_to;\r\n    const capacity = data.capacity;\r\n    const args = new ChangeReservationArg(data.type, data.operation, capacity, date_from, date_to);\r\n    this.changereservation.emit(args);\r\n  }\r\n\r\n\r\n  onDayReservation(consumption: ConsumptionClass | null) {\r\n    this.reservation.emit(consumption);\r\n  }\r\n\r\n  public getConsumption(rentalUnit:RentalUnitClass, day: Date) {\r\n    let filtered = this.consumptions.filter( (consumption:ConsumptionClass) => (consumption.rental_unit_id === rentalUnit.id && consumption.date.getMonth() == day.getMonth() && consumption.date.getDate() == day.getDate()) );\r\n    if(filtered.length) {\r\n      return filtered[0];\r\n    }\r\n    return null;\r\n  }\r\n\r\n}\r\n","\r\n\r\n<div>\r\n  <planning-calendar-navbar \r\n                            [day]=\"day\"\r\n                            [month]=\"month\"\r\n                            [year]=\"year\"\r\n                            (changedays)=\"onDaysChanged($event)\">\r\n  </planning-calendar-navbar>\r\n</div>\r\n\r\n<div class=\"container\">\r\n    <table class=\"tabreservation\"> \r\n      <!-- header -->\r\n      <thead>\r\n      <tr class=\"head\" >\r\n        <td class=\"cell-room\" rowspan=\"2\">ref.</td>\r\n        <td class=\"cell-room\" rowspan=\"2\">cap.</td>\r\n        <td class=\"cell-room\" rowspan=\"2\">stat.</td>\r\n        <td class=\"head-months\" *ngFor=\"let month of headerdays.months\" [attr.colspan]=\"month.days\" [style.width]=\"(100/headerdays.months.length)+'%'\"> \r\n          {{ month.date | date : 'MMMM y' }}\r\n        </td>\r\n      </tr>\r\n      <tr class=\"head\">\r\n        <th class=\"head-days\" *ngFor=\"let dd of headerdays.headDays1\"> \r\n          {{ dd | date: 'EEE'}}<br />\r\n          {{ dd | date: 'd'}}\r\n        </th>\r\n        <th class=\"head-days\" *ngFor=\"let dd of headerdays.headDays2\"> \r\n          {{ dd | date: 'EEE'}}<br />\r\n          {{ dd | date : 'd'}}\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <!-- body -->\r\n      <tr class=\"rows\" *ngFor=\"let rental_unit of rental_units; let index = index;\">\r\n        <td class=\"cell-room\" >{{ rental_unit.name }}</td>\r\n        <td class=\"cell-room\" >{{ rental_unit.capacity }}</td>\r\n        <td class=\"cell-room\" >status</td>\r\n\r\n        <td *ngFor=\"let day of headerdays.headDaysAll\">\r\n          <planning-calendar-bookings \r\n            [color]=\"colors[index % colors.length]\"\r\n            [room]=\"rental_unit\" \r\n            [day]=\"day\" \r\n            [consumption]=\"getConsumption(rental_unit, day)\"\r\n            (reservation)=\"onDayReservation($event)\">\r\n          </planning-calendar-bookings>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n    </table>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\n\r\nimport { PlanningComponent } from './planning.component';\r\n// import { BookingEditComponent } from './edit/booking.edit.component';\r\n\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: PlanningComponent\r\n    }\r\n    /*\r\n    ,\r\n    {\r\n        path: 'edit/:id',\r\n        component: BookingEditComponent\r\n    },\r\n    {\r\n        path: 'edit',\r\n        component: BookingEditComponent\r\n    }\r\n    */\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PlanningRoutingModule {}\r\n","import { Component, ChangeDetectorRef, OnInit } from '@angular/core';\nimport { MatDialog, MatDialogConfig } from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\n\nimport { FormReservationComponent } from './components/form-reservation/form-reservation.component';\nimport { RentalUnitClass } from 'src/app/model/rental.unit.class';\nimport { ConsumptionClass } from 'src/app/model/consumption.class';\nimport { ChangeReservationArg } from 'src/app/model/changereservationarg';\nimport { ReservationService } from 'src/app/services/reservation-service';\nimport { ApiService } from 'sb-shared-lib';\nimport { convertUpdateArguments } from '@angular/compiler/src/compiler_util/expression_converter';\n\ninterface DateRange {\n  from: Date,\n  to: Date\n}\n\n@Component({\n  selector: 'planning',\n  templateUrl: './planning.component.html',\n  styleUrls: ['./planning.component.scss']\n})\nexport class PlanningComponent implements OnInit {\n  year: number;\n  month: number;\n  day: number;\n  currentsearch: ChangeReservationArg;\n  sub: Subscription;\n  rooms: RentalUnitClass[];\n  bookings: ConsumptionClass[];\n\n\n  date_range: DateRange = <DateRange>{};\n\n  rental_units: Array<any> = [];\n  consumptions: Array<any> = [];\n\n  constructor(private dialog: MatDialog, private api: ApiService, private service: ReservationService, private cd: ChangeDetectorRef) {\n    const d     = new Date();\n    this.year   = d.getFullYear();\n    this.month  = d.getMonth() + 1;\n    this.day    = d.getDate();\n\n    this.rooms = [];\n    this.bookings = [];\n   }\n\n  ngOnInit() {\n\n  }\n\n\n  private async load() {\n// #todo - par defaut, utiliser le premier center de l'utilisateur en cours\n    const rental_units = await this.api.collect(\"lodging\\\\realestate\\\\RentalUnit\", [\"center_id\", \"=\",  3], ['id', 'name', 'code', 'capacity'], 'id', 'asc', 0, 100);\n    if(rental_units && rental_units.length) {\n      this.rental_units = rental_units;\n      let rental_units_ids = rental_units.map( (a:any) => a.id );\n      console.log('rental units', rental_units_ids);\n      const consumptions = await this.api.collect(\"sale\\\\booking\\\\Consumption\", [\n        ['date', '>=', this.date_range.from],\n        ['date', '<=', this.date_range.to],\n        ['rental_unit_id', 'in',  rental_units_ids]\n      ], ['id', 'rental_unit_id', 'date', 'schedule_from', 'schedule_to', 'booking_line_id', 'booking_id.customer_id.name', 'booking_id.status', 'booking_id.name'], 'id', 'asc', 0, 500);\n      if(consumptions && consumptions.length) {\n        this.consumptions = consumptions;\n        console.log('consumptions', consumptions);\n      }\n    }\n  }\n\n  public async onReservationChanged(event: any) {\n    console.log('PlanningComponent::onReservationChanged', event);\n\n    let args = <ChangeReservationArg> event;\n\n    this.currentsearch = args;\n\n    this.date_range.from = args.date_from;\n    this.date_range.to = args.date_to;\n\n    try {\n      await this.load();\n\n      this.rooms = this.rental_units.map( (a:any):RentalUnitClass => {\n        return <RentalUnitClass> {\n          id: a.id,\n          name: a.name,\n          capacity: a.capacity\n        };\n      });\n\n      let tmp:any = {};\n      for(let consumption of this.consumptions) {\n        if(!tmp.hasOwnProperty(consumption['booking_line_id'])) {\n          tmp[consumption['booking_line_id']] = [];\n        }\n        tmp[consumption['booking_line_id']].push(consumption);\n      }\n\n      let consumptions: ConsumptionClass[] = new Array<ConsumptionClass>();\n      for(let booking_line_id of Object.keys(tmp)) {\n        let a = tmp[booking_line_id];\n        let first = a[0];\n        let last = a[a.length-1];\n\n        let date_from = new Date(first['date']);\n        let date_to = new Date(last['date']);\n\n        let nb_nights = ((a:Date, b:Date) => {        \n          const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\n          const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());\n          return Math.floor((utc2 - utc1) / (1000 * 3600 * 24));\n        })(date_from, date_to);\n\n        for(let consumption of a) {\n          consumptions.push( new ConsumptionClass(\n            first.id,\n            first['rental_unit_id'],\n            this.rental_units.find( (a) => a.id == consumption.rental_unit_id ).capacity, \n            new Date(consumption.date),\n            date_from,\n            date_to,\n            nb_nights,\n            first['booking_id']['name'],\n            first['booking_id']['status'],\n            first['booking_id']['customer_id']['name'],\n            // #todo : booking_payment_status\n            'unknown'\n          ) );\n        }\n        \n      }\n\n      this.bookings = consumptions;\n\n      this.cd.detectChanges();\n    }\n    catch(error) {\n      console.warn(error);\n    }\n/*    \n    this.sub = this.service.getReservations(args).subscribe(result => {\n      const r = result as ReservationClass;\n      this.rooms = r.rooms;\n\n      this.bookings = r.bookings;\n      console.log(this.bookings);\n      this.cd.detectChanges();\n    });\n*/\n  }\n\n  onDayReservation(consumption: ConsumptionClass | null) {\n    if(consumption) {\n      const dialogConfig = new MatDialogConfig();\n      dialogConfig.width = '600px';\n      dialogConfig.height = '550px';\n      const list = this.service.getRooms();\n      dialogConfig.data = { rental_unit_id: consumption.rental_unit_id, date: consumption.date, rooms: list };\n      const dialogRef = this.dialog.open(FormReservationComponent, dialogConfig);\n      dialogRef.afterClosed().subscribe(data => {\n        if (data === 'ok') {\n          this.onReservationChanged(this.currentsearch);\n        }\n        if (data === 'no') {\n        }\n      });\n    }\n  }\n\n}\n","<div class=\"container\">\r\n  <div class=\"planning-header\">Calendrier</div>\r\n  <div class=\"planning-body\">\r\n    <planning-calendar \r\n      [day]=\"day\" \r\n      [month]=\"month\" \r\n      [year]=\"year\"\r\n      [rental_units]=\"rooms\"\r\n      [consumptions]=\"bookings\"\r\n      (changereservation)=\"onReservationChanged($event)\"\r\n      (reservation)=\"onDayReservation($event)\">\r\n    </planning-calendar>\r\n  </div>\r\n\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { DateAdapter, MAT_DATE_LOCALE } from '@angular/material/core';\r\nimport { Platform } from '@angular/cdk/platform';\r\nimport { CustomDateAdapter } from '../../customDateAdapter';\r\n\r\n\r\nimport { SharedLibModule, AuthInterceptorService } from 'sb-shared-lib';\r\n\r\nimport { PlanningRoutingModule } from './planning-routing.module';\r\n\r\nimport { PlanningComponent } from './planning.component';\r\nimport { PlanningCalendarComponent } from './components/planning.calendar/planning.calendar.component';\r\nimport { PlanningCalendarBookingsComponent } from './components/planning.calendar/components/planning.calendar.bookings/planning.calendar.bookings.component';\r\nimport { PlanningCalendarNavbarComponent } from './components/planning.calendar/components/planning.calendar.navbar/planning.calendar.navbar.component';\r\nimport { FormReservationComponent } from './components/form-reservation/form-reservation.component';\r\n\r\nimport { PlanningCalendarSearchOutComponent } from './components/planning.calendar/components/planning.calendar.navbar/components/planning.calendar.searchout/planning.calendar.searchout.component';\r\nimport { PlanningCalendarSearchInComponent } from './components/planning.calendar/components/planning.calendar.navbar/components/planning.calendar.searchin/planning.calendar.searchin.component';\r\n\r\nimport { LayoutModule } from '@angular/cdk/layout';\r\nimport { OverlayModule } from '@angular/cdk/overlay';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedLibModule,\r\n    PlanningRoutingModule,\r\n    LayoutModule,\r\n    OverlayModule\r\n  ],\r\n  declarations: [\r\n    PlanningComponent,\r\n    PlanningCalendarComponent,\r\n    PlanningCalendarBookingsComponent,\r\n    PlanningCalendarNavbarComponent,\r\n    FormReservationComponent,\r\n    PlanningCalendarSearchOutComponent,\r\n    PlanningCalendarSearchInComponent\r\n  ],\r\n  providers: [\r\n    { provide: DateAdapter, useClass: CustomDateAdapter, deps: [MAT_DATE_LOCALE, Platform] }\r\n  ]\r\n})\r\nexport class AppInPlanningModule { }\r\n","import { HeaderDays } from './headerdays';\r\n\r\nexport class ChangeDateArg {\r\n\r\n  constructor(\r\n    public type: string, \r\n    public operation: string, \r\n    public capacity: number, \r\n    public days: HeaderDays\r\n  ) { }\r\n\r\n}\r\n","\r\nexport class ChangeReservationArg {\r\n\r\n  constructor(\r\n    public type: string, \r\n    public operation: string, \r\n    public capacity: number, \r\n    public date_from: Date, \r\n    public date_to: Date\r\n  ) { }\r\n\r\n}\r\n","\r\nexport class HeaderDays {\r\n  date_from: Date;\r\n  date_to: Date;\r\n  headDaysAll: Date[];\r\n  headDays1: Date[];\r\n  headDays2: Date[];\r\n  months: any[];\r\n\r\n  constructor() {\r\n    this.headDaysAll = [];\r\n    this.headDays1 = [];\r\n    this.headDays2 = [];\r\n    this.months = [];\r\n  }\r\n\r\n}","\r\nexport class SearchReservationArg {\r\n\r\n  constructor(\r\n    public year: number, \r\n    public month: number, \r\n    public name: string\r\n  ) { }\r\n\r\n}\r\n","\r\nexport class SelectReservationArg {\r\n\r\n  constructor(\r\n    public rental_unit_id: number, \r\n    public date_from: Date, \r\n    public date_to: Date\r\n  ) { }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}